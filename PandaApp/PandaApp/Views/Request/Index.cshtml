@model IEnumerable<PandaApp.Models.Request>
@{
    ViewBag.Title = "Requests";
}

<!-- Search -->
<div class="row text-center">
    @using (Html.BeginForm("RequestSearch", "Request"))
    {
        <input type="text" class="form-control" id="input" name="title" size="21" maxlength="120" placeholder="Request search">
        @Html.DropDownList("Language", (IEnumerable<SelectListItem>)ViewBag.Languages, new { @class = "form-control" })
        <input type="submit" class="btn btn" value="Search">
    }
</div>
<!-- search end-->
<h3>View Requests</h3>
<hr />

@Html.ActionLink("Create Request", "Create", null, new { @class = "btn btn-default" })

<table class="table">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Title)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Language)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Author)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.DateCreated)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Upvotes)
            </th>            
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    <!-- So the title links to its profile -->
                    @Html.ActionLink(item.Title, "Details", "Request",new { id = item.ID }, null)
                </td>
                <td>
                    @item.Language
                </td>
                <td>
                    @if (@item.Author == "Guest")
                    {
                        @item.Author
                    }
                    else
                    {
                        @Html.ActionLink(item.Author, "ViewUser", "Account", new { username = item.Author }, null)
                    }
                </td>
                <td>
                    @item.DateCreated
                </td>
                <td>
                    @item.Upvotes 
                </td>
@*<td>
@using (Html.BeginForm("Upvote2", "Request", FormMethod.Post, new { @id = "Upvote"}))
{
if(item.UpvotedByUser)
{
<input type="text" name="s" value="@Convert.ToString(item.ID)" style="display:none" />
<input type="submit" class="btn btn" value="+">
}
}
</td>*@
            </tr>
        }
    </tbody>
</table>

<script src="~/Scripts/UpvoteScript.js"></script>

